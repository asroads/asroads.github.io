<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/icons/favicon.ico">
    

    
    
        
<link rel="stylesheet" href="/css/mdui.min.v1.0.0.css">

    
    
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/iconfont.css">


    
    












          


    
    
    <title>
        
            简单优化一下个人博客 | Asroads&#39;Blog
        
    </title>
    
    
<meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Asroads'Blog" type="application/atom+xml">
</head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/" class="mdui-typo-headline">Asroads&#39;Blog</a>
    <a href="/" class="header-subtitle mdui-typo-headline">君子不器</a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="请输入关键字" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">站点概览</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">关于</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-1">
        <div class="mdui-list">
            
                
                <a href="/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">首页</div>
                </a>
            
                
                <a href="/categories/game" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-folder"></i>
                    </div>
                    <div class="mdui-list-item-content">手游</div>
                </a>
            
                
                <a href="/categories/tool/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-tools"></i>
                    </div>
                    <div class="mdui-list-item-content">技术</div>
                </a>
            
                
                <a href="/categories/other" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-gallery"></i>
                    </div>
                    <div class="mdui-list-item-content">杂项</div>
                </a>
            
                
                <a href="/categories/life" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-blog"></i>
                    </div>
                    <div class="mdui-list-item-content">感悟</div>
                </a>
            
                
                <a href="/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">标签</div>
                </a>
            
                
                <a href="/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">归档</div>
                </a>
            
                
                <a href="/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">关于</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">夜间模式</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-1">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/icons/avatar.png"/>
                
            </div>
            <div class="sidebar-author-name">asroads</div>
            <div class="sidebar-description">自信是成功第一法宝</div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="/jsroads@163.com" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/jsroads" class="mdui-chip-title">jsroads</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/asroads" class="mdui-chip-title">asroads</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-qq"></i></span>
                    <a target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&k=fTVxmSSA" class="mdui-chip-title">QQ群</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">友情链接</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a target="_blank" rel="noopener" href="https://seazhang.github.io/" class="mdui-list-item mdui-ripple">
                            麦田守望者
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://zhaoyabo.github.io/" class="mdui-list-item mdui-ripple">
                            YABO的博客
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://dreamheavenyang.github.io/" class="mdui-list-item mdui-ripple">
                            DreamHeaven
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/post/f967797a.html">简单优化一下个人博客</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      发布于:&nbsp;2019-09-25
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      更新于:&nbsp;2025-04-22
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      分类于:&nbsp;<a class="category-link" href="/categories/other/">other</a>
    </span>
    
      <span>
        <span class="iconfont icon-eye"></span>
        阅读次数:&nbsp;
        <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
      </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=简单优化一下个人博客&url=http://blog.asroads.com/post/f967797a.html&pic=http://blog.asroads.com/icons/favicon.ico&searchPic=false&style=simple" target="_blank" class="mdui-ripple">分享到 Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=简单优化一下个人博客&url=http://blog.asroads.com/post/f967797a.html&via=asroads" target="_blank" class="mdui-ripple">分享到 Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.asroads.com/post/f967797a.html" target="_blank" class="mdui-ripple">分享到 Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=http://blog.asroads.com/post/f967797a.html" target="_blank" class="mdui-ripple">分享到 Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://blog.asroads.com/post/f967797a.html&title=简单优化一下个人博客" target="_blank" class="mdui-ripple">分享到 LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=Asroads&#39;Blog&title=简单优化一下个人博客&summary=自信是成功第一法宝&pics=http://blog.asroads.com/icons/favicon.ico&url=http://blog.asroads.com/post/f967797a.html" target="_blank" class="mdui-ripple">分享到 QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=http://blog.asroads.com/post/f967797a.html&text=简单优化一下个人博客" target="_blank" class="mdui-ripple">分享到 Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/hexo/ >hexo</a>
      </i>
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/Windows/ >Windows</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <p>个人博客开了一年多，平常大都是发布一下文章，写一下工作的感想，很多文章都用了图片，今天发现我好多图片都是后缀png的，而且尺寸都显得很大，要想然自己的博客文章打开的快速，减少读者的加载是一个工程，另外每个文章写的时候，里面有很多图片，最后都重新替换了，可很难找出那些是没有引用的，于是乎，有了这篇文章。</p>
<span id="more"></span>

<h3 id="优化四部曲"><a href="#优化四部曲" class="headerlink" title="优化四部曲"></a>优化四部曲</h3><ul>
<li>更改图片格式，比如后缀为 png的改成JPEG</li>
<li>更改图片尺寸。比如原来是1000X600的 可以适当比例缩放</li>
<li>删除多余的没有用到的图片</li>
<li>优化网站链接</li>
</ul>
<h4 id="更改格式"><a href="#更改格式" class="headerlink" title="更改格式"></a>更改格式</h4><ul>
<li>Mac系统自带预览图片可以搞定</li>
</ul>
<p>因为我文章不多，所以我一个个操作</p>
<ol>
<li><p>比如我们这个文章的博客</p>
<p><img src="/post/f967797a/image-20190925142711143.jpeg" alt="image-20190925142711143"></p>
</li>
<li><p>我们打开文件夹,全选我们的图片</p>
</li>
</ol>
<p><img src="/post/f967797a/image-20190925142843297.jpeg" alt="image-20190925142843297"></p>
<ol start="3">
<li>继续全选我们的图片</li>
</ol>
<p><img src="/post/f967797a/image-20190925142931375.jpeg" alt="image-20190925142931375"></p>
<ol start="4">
<li><p><img src="/post/f967797a/image-20190925142957982.jpeg" alt="image-20190925142957982"></p>
</li>
<li><p>修改我们需要的满意的尺寸 我是按照百分比修改的</p>
</li>
</ol>
<p><img src="/post/f967797a/image-20190925143141178.jpeg" alt="image-20190925143141178"></p>
<ol start="6">
<li>我们发现 图片尺寸已经 缩小 </li>
</ol>
<p><img src="/post/f967797a/image-20190925143314469.jpeg" alt="image-20190925143314469"></p>
<h4 id="更改格式-1"><a href="#更改格式-1" class="headerlink" title="更改格式"></a>更改格式</h4><ol>
<li><p>前面几步和上面一致，只是在打开编辑的时候选择的是 导出选定的图像</p>
</li>
<li><p><img src="/post/f967797a/image-20190925143458361.jpeg" alt="image-20190925143458361"></p>
</li>
<li><p>选择我们要存放的文件夹 和 选项 选择 格式</p>
</li>
</ol>
<p><img src="/post/f967797a/image-20190925143546127.jpeg" alt="image-20190925143546127"></p>
<p><img src="/post/f967797a/image-20190925143605095.jpeg" alt="image-20190925143605095"></p>
<ol start="3">
<li>把生成的图片替换</li>
</ol>
<p><img src="/post/f967797a/image-20190925143636903.jpeg" alt="image-20190925143636903"></p>
<ol start="4">
<li>我们用 Typora 编辑器打开我们的文章 选择查找 –替换 后缀名即可</li>
</ol>
<p><img src="/post/f967797a/image-20190925144055367.jpeg" alt="image-20190925144055367"></p>
<p>5.我们发现 可以正常显示我们新的图片了</p>
<h4 id="删除多余的图片"><a href="#删除多余的图片" class="headerlink" title="删除多余的图片"></a>删除多余的图片</h4><p>这个我自己去看了 编辑器的设置没有这样的功能，就想着用Python3 自己写个脚本吧</p>
<p>脚本如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env -S -P$&#123;HOME&#125;/anaconda/bin python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re, os</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"></span><br><span class="line">blogDirsList = []</span><br><span class="line">img_patten = <span class="string">r&#x27;!\[.*?\]\((.*?)\)|&lt;img.*?src=[\&#x27;\&quot;](.*?)[\&#x27;\&quot;].*?&gt;&#x27;</span></span><br><span class="line"><span class="comment"># 博客文件夹 本地目录指向 source/_posts 源文件</span></span><br><span class="line">myblogPath = <span class="string">&#x27;/jsroads/blog/asroads.github.io/source/_posts&#x27;</span></span><br><span class="line">blogPath = os.path.abspath(myblogPath)</span><br><span class="line">blogfiles = os.listdir(blogPath)</span><br><span class="line"><span class="keyword">for</span> blogfile <span class="keyword">in</span> blogfiles:</span><br><span class="line">    <span class="comment"># 得到该文件下所有目录的路径</span></span><br><span class="line">    m = os.path.join(blogPath, blogfile)</span><br><span class="line">    <span class="comment"># 判断该路径下是否是文件夹</span></span><br><span class="line">    <span class="keyword">if</span> (os.path.isdir(m)):</span><br><span class="line">        h = os.path.split(m)</span><br><span class="line">        <span class="comment"># 把符合要求的目录加进去</span></span><br><span class="line">        blogDirsList.append(os.path.join(blogPath, h[<span class="number">1</span>]))</span><br><span class="line"><span class="comment"># print(&quot;博客目录&quot;, blogDirsList)</span></span><br><span class="line"><span class="comment"># 遍历目录地址</span></span><br><span class="line">mdList = []  <span class="comment"># md 文件里引用的图片</span></span><br><span class="line">pngList = []  <span class="comment"># 本地同名文件夹文件的图片</span></span><br><span class="line"><span class="keyword">for</span> source_path <span class="keyword">in</span> blogDirsList:</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(source_path):</span><br><span class="line">        mdList = []</span><br><span class="line">        pngList = []</span><br><span class="line">        <span class="keyword">for</span> parent, dirs, files <span class="keyword">in</span> os.walk(source_path):</span><br><span class="line">            <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">                <span class="comment"># print(&quot;file:&quot;,file)</span></span><br><span class="line">                file_path = os.path.join(parent, file)</span><br><span class="line">                <span class="keyword">if</span> os.path.splitext(file)[-<span class="number">1</span>] == <span class="string">&quot;.png&quot;</span> <span class="keyword">or</span> os.path.splitext(file)[-<span class="number">1</span>] == <span class="string">&quot;.jpeg&quot;</span>:  <span class="comment"># 获取后缀</span></span><br><span class="line">                    picUrl = os.path.join(parent, file)</span><br><span class="line">                    pngList.append(picUrl)</span><br><span class="line">                    <span class="comment"># print(&#x27;jsroads&#x27;,file_path)</span></span><br><span class="line">                <span class="keyword">if</span> os.path.splitext(file)[-<span class="number">1</span>] == <span class="string">&quot;.md&quot;</span>:  <span class="comment"># 获取后缀</span></span><br><span class="line">                    <span class="keyword">with</span> <span class="built_in">open</span>(os.path.join(source_path, file), <span class="string">&#x27;r&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:  <span class="comment"># 使用utf-8 编码打开</span></span><br><span class="line">                        post = f.read()</span><br><span class="line">                        matches = re.<span class="built_in">compile</span>(img_patten).findall(post)</span><br><span class="line">                        <span class="keyword">if</span> matches <span class="keyword">and</span> <span class="built_in">len</span>(matches) &gt; <span class="number">0</span>:</span><br><span class="line">                            <span class="comment"># print(&quot;jsroads:&quot;,matches)</span></span><br><span class="line">                            <span class="comment"># 多个group整合成一个列表</span></span><br><span class="line">                            <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> <span class="built_in">list</span>(chain(*matches)):</span><br><span class="line">                                <span class="keyword">if</span> <span class="keyword">match</span> <span class="keyword">and</span> <span class="built_in">len</span>(<span class="keyword">match</span>) &gt; <span class="number">0</span>:</span><br><span class="line">                                    picUrl = os.path.join(parent, <span class="keyword">match</span>)</span><br><span class="line">                                    mdList.append(picUrl)</span><br><span class="line">        <span class="comment"># 对比一下 两个文件夹的不同 删除没有使用的</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;------------&quot;</span>)</span><br><span class="line">        <span class="keyword">for</span> picPath <span class="keyword">in</span> pngList:</span><br><span class="line">            <span class="keyword">if</span> picPath <span class="keyword">not</span> <span class="keyword">in</span> mdList:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;picPath&quot;</span>, picPath)</span><br><span class="line">                <span class="comment"># 删除 没有使用的素材（这里主要删除图片）</span></span><br><span class="line">                os.remove(picPath)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>下面是我的输出：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">博客目录 <span class="punctuation">[</span>&#x27;/jsroads/blog/asroads.github.io/source/_posts/other&#x27;<span class="punctuation">,</span> &#x27;/jsroads/blog/asroads.github.io/source/_posts/about&#x27;<span class="punctuation">,</span> &#x27;/jsroads/blog/asroads.github.io/source/_posts/life&#x27;<span class="punctuation">,</span> &#x27;/jsroads/blog/asroads.github.io/source/_posts/game&#x27;<span class="punctuation">,</span> &#x27;/jsroads/blog/asroads.github.io/source/_posts/tool&#x27;<span class="punctuation">]</span></span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824183550706.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824184345625.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824184445658.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/LayaBox2<span class="number">-0</span>-圆形进度条制作/image<span class="number">-20190327200707147.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Cocos-Creator-引入TweenMax-Uncaught-TypeError-container-appendChild-解决方法/image<span class="number">-20190916104222217.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Cocos-Creator-引入TweenMax-Uncaught-TypeError-container-appendChild-解决方法/image<span class="number">-20190916104642302.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/LayaAir2<span class="number">-0</span>-LayaBox-之小游戏开放域开发/image<span class="number">-20190307202019424.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/微信小游戏Laya2<span class="number">-0</span>粒子特效实现/image<span class="number">-20190823142029613.</span>jpeg</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/微信小游戏Laya2<span class="number">-0</span>粒子特效实现/image<span class="number">-20190823141529866.</span>jpeg</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824183550706.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824184345625.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Layabox2<span class="number">-0</span>引入puremvc框架/image<span class="number">-20190824184445658.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/LayaBox2<span class="number">-0</span>-圆形进度条制作/image<span class="number">-20190327200707147.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Cocos-Creator-引入TweenMax-Uncaught-TypeError-container-appendChild-解决方法/image<span class="number">-20190916104222217.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/Cocos-Creator-引入TweenMax-Uncaught-TypeError-container-appendChild-解决方法/image<span class="number">-20190916104642302.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/LayaAir2<span class="number">-0</span>-LayaBox-之小游戏开放域开发/image<span class="number">-20190307202019424.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/微信小游戏Laya2<span class="number">-0</span>粒子特效实现/image<span class="number">-20190823142029613.</span>jpeg</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/game/微信小游戏Laya2<span class="number">-0</span>粒子特效实现/image<span class="number">-20190823141529866.</span>jpeg</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/tool/Webstorm如何配置Layabox2<span class="number">-0</span>项目/image<span class="number">-20190302194904756.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/tool/Webstorm如何配置Layabox2<span class="number">-0</span>项目/image<span class="number">-20190302195857734.</span>png</span><br><span class="line">picPath /jsroads/blog/asroads.github.io/source/_posts/tool/如何下载微信公众号的文章和媒体文件/image<span class="number">-20190516123503663.</span>png</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其实删除多余素材 并不能 加速 用户体验，但是对于自己日常开发要求干净的洁癖还是很重要的，自己试试吧。</p>
<h3 id="删除冗余图片nodejs版本"><a href="#删除冗余图片nodejs版本" class="headerlink" title="删除冗余图片nodejs版本"></a>删除冗余图片nodejs版本</h3><h4 id="blogDelUnusedPic-js-内容更新于2024-07-20"><a href="#blogDelUnusedPic-js-内容更新于2024-07-20" class="headerlink" title="blogDelUnusedPic.js 内容更新于2024-07-20"></a>blogDelUnusedPic.js <strong>内容更新于2024-07-20</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">&#x27;readline&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取命令行参数中的路径</span></span><br><span class="line"><span class="keyword">let</span> myblogPath = process.<span class="property">argv</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 readline 接口，用于在命令行中获取用户输入</span></span><br><span class="line"><span class="keyword">const</span> rl = readline.<span class="title function_">createInterface</span>(&#123;</span><br><span class="line">    <span class="attr">input</span>: process.<span class="property">stdin</span>,</span><br><span class="line">    <span class="attr">output</span>: process.<span class="property">stdout</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 递归遍历目录，获取所有文件的路径</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getAllFiles</span> = (<span class="params">dirPath, arrayOfFiles = []</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> files = fs.<span class="title function_">readdirSync</span>(dirPath);</span><br><span class="line"></span><br><span class="line">    files.<span class="title function_">forEach</span>(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> filePath = path.<span class="title function_">join</span>(dirPath, file);</span><br><span class="line">        <span class="keyword">if</span> (fs.<span class="title function_">statSync</span>(filePath).<span class="title function_">isDirectory</span>()) &#123;</span><br><span class="line">            arrayOfFiles = <span class="title function_">getAllFiles</span>(filePath, arrayOfFiles);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            arrayOfFiles.<span class="title function_">push</span>(filePath);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> arrayOfFiles;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义处理逻辑的主函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">processBlogPath</span> = (<span class="params">blogPath</span>) =&gt; &#123;</span><br><span class="line">    blogPath = blogPath.<span class="title function_">trim</span>();</span><br><span class="line">    <span class="keyword">if</span> (!blogPath) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;提供的博客文件夹路径无效&#x27;</span>);</span><br><span class="line">        process.<span class="title function_">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> resolvedPath = path.<span class="title function_">resolve</span>(blogPath);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取博客文件夹列表</span></span><br><span class="line">    <span class="keyword">const</span> blogfiles = fs.<span class="title function_">readdirSync</span>(resolvedPath);</span><br><span class="line">    <span class="keyword">const</span> blogDirsList = blogfiles.<span class="title function_">filter</span>(<span class="function"><span class="params">blogfile</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> m = path.<span class="title function_">join</span>(resolvedPath, blogfile);</span><br><span class="line">        <span class="keyword">return</span> fs.<span class="title function_">statSync</span>(m).<span class="title function_">isDirectory</span>();</span><br><span class="line">    &#125;).<span class="title function_">map</span>(<span class="function"><span class="params">blogfile</span> =&gt;</span> path.<span class="title function_">join</span>(resolvedPath, blogfile));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> imgPattern = <span class="regexp">/!\[.*?\]\((.*?\.(?:jpg|jpeg|gif|png))\)/g</span>;</span><br><span class="line"></span><br><span class="line">    blogDirsList.<span class="title function_">forEach</span>(<span class="function"><span class="params">sourcePath</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (fs.<span class="title function_">existsSync</span>(sourcePath)) &#123;</span><br><span class="line">            <span class="keyword">let</span> mdList = [];</span><br><span class="line">            <span class="keyword">let</span> pngList = [];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">const</span> allFiles = <span class="title function_">getAllFiles</span>(sourcePath);</span><br><span class="line"></span><br><span class="line">            allFiles.<span class="title function_">forEach</span>(<span class="function"><span class="params">filePath</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">const</span> ext = path.<span class="title function_">extname</span>(filePath);</span><br><span class="line">                <span class="keyword">if</span> (ext === <span class="string">&#x27;.png&#x27;</span> || ext === <span class="string">&#x27;.jpeg&#x27;</span> || ext === <span class="string">&#x27;.jpg&#x27;</span> || ext === <span class="string">&#x27;.gif&#x27;</span>) &#123;</span><br><span class="line">                    pngList.<span class="title function_">push</span>(filePath);</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ext === <span class="string">&#x27;.md&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">const</span> content = fs.<span class="title function_">readFileSync</span>(filePath, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">                    <span class="keyword">let</span> matches;</span><br><span class="line">                    <span class="keyword">while</span> ((matches = imgPattern.<span class="title function_">exec</span>(content)) !== <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">const</span> actualPath = matches[<span class="number">1</span>]; <span class="comment">// 获取捕获组中的实际路径</span></span><br><span class="line">                        <span class="keyword">if</span> (actualPath) &#123;</span><br><span class="line">                            <span class="keyword">const</span> picUrl = path.<span class="title function_">join</span>(path.<span class="title function_">dirname</span>(filePath), actualPath);</span><br><span class="line">                            mdList.<span class="title function_">push</span>(<span class="built_in">decodeURI</span>(picUrl));</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">// console.table(mdList);</span></span><br><span class="line">            <span class="comment">// 删除未使用的图片</span></span><br><span class="line">            <span class="keyword">const</span> delList = []</span><br><span class="line">            pngList.<span class="title function_">forEach</span>(<span class="function"><span class="params">picPath</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (!mdList.<span class="title function_">includes</span>(picPath)) &#123;</span><br><span class="line">                    delList.<span class="title function_">push</span>(picPath);</span><br><span class="line">                    <span class="comment">// console.log(&#x27;picPath&#x27;, picPath);</span></span><br><span class="line">                    fs.<span class="title function_">unlinkSync</span>(picPath); <span class="comment">// 删除未使用的图片</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">table</span>(delList);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查是否提供了路径，如果没有则提示用户输入</span></span><br><span class="line"><span class="keyword">if</span> (!myblogPath) &#123;</span><br><span class="line">    rl.<span class="title function_">question</span>(<span class="string">&#x27;请输入博客文件夹路径: &#x27;</span>, <span class="function">(<span class="params">inputPath</span>) =&gt;</span> &#123;</span><br><span class="line">        rl.<span class="title function_">close</span>();</span><br><span class="line">        <span class="title function_">processBlogPath</span>(inputPath);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">processBlogPath</span>(myblogPath);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>上面是最新使用 nodejs 实现的脚本 </p>
<h4 id="关键点"><a href="#关键点" class="headerlink" title="关键点"></a>关键点</h4><ol>
<li><code>imgPattern</code> 正则表达式捕获组使用 <code>(...)</code> 来捕获实际的图片路径。</li>
<li>在 <code>while ((matches = imgPattern.exec(content)) !== null)</code> 中，<code>matches[1]</code> 包含实际的图片路径。</li>
<li>使用 <code>const picUrl = path.join(sourcePath, actualPath);</code> 构建正确的图片路径，并将其加入 <code>mdList</code>。</li>
<li>使用 <code>decodeURI</code> 对 <code>mdList</code> 中的路径进行解码。</li>
<li>新增了 <code>getAllFiles</code> 函数递归遍历目录，获取所有文件路径。</li>
<li>在 <code>processBlogPath</code> 函数中调用 <code>getAllFiles</code> 获取所有文件，并处理每个文件。</li>
</ol>
<h4 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h4><ol>
<li><p>如果在命令行中提供路径，则脚本会自动去除路径前后的空格并处理路径下的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node blogDelUnusedPic.js &quot;/jsroads/blog/asroads.github.io/source/_posts&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>如果没有提供路径，脚本会提示用户输入路径，然后去除空格并处理路径下的文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node blogDelUnusedPic.js</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这样，脚本将递归遍历指定目录及其子目录，处理所有文件，确保 <code>mdList</code> 中的路径经过编码与 <code>pngList</code> 中的内容一致。</p>
<h3 id="下面记录一下-Python3-常用的一些操作"><a href="#下面记录一下-Python3-常用的一些操作" class="headerlink" title="下面记录一下 Python3 常用的一些操作"></a>下面记录一下 Python3 常用的一些操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mport os</span><br><span class="line">file = <span class="string">&quot;Hello.py&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取前缀（文件名称）</span></span><br><span class="line"><span class="keyword">assert</span> os.path.splitext(file)[<span class="number">0</span>] == <span class="string">&quot;Hello&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取后缀（文件类型）</span></span><br><span class="line"><span class="keyword">assert</span> os.path.splitext(file)[-<span class="number">1</span>] == <span class="string">&quot;.py&quot;</span></span><br><span class="line"><span class="keyword">assert</span> os.path.splitext(file)[-<span class="number">1</span>][<span class="number">1</span>:] == <span class="string">&quot;py&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取当前程序运行目录</span></span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取指定目录下的列表</span></span><br><span class="line"><span class="built_in">print</span>(os.listdir(<span class="string">&quot;E:\\server&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查是否存在文件或文件夹</span></span><br><span class="line"><span class="built_in">print</span>(os.path.exists(<span class="string">&quot;E:\\test\\a.txt&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建文件夹，已经存在文件会报错</span></span><br><span class="line">os.mkdir(<span class="string">&quot;E:\\test1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除文件夹，只能删除文件夹</span></span><br><span class="line">os.remove(<span class="string">&quot;E:\\test1&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 文件重命名</span></span><br><span class="line">os.rename(<span class="string">&quot;E:\\test\\a.txt&quot;</span>, <span class="string">&quot;E:\\test\\b.txt&quot;</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil,os</span><br><span class="line"><span class="keyword">if</span> os.path.exists(os.path.join(bizimage_filepath, image_name)):</span><br><span class="line">	//移除文件</span><br><span class="line">	os.remove(os.path.join(bizimage_filepath, image_name))</span><br><span class="line">	//移除空文件夹</span><br><span class="line">	shutil.rmtree(bizimage_filepath)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过in和not in关键字来判读一个list中是否包含一个元素</span></span><br><span class="line">theList = [‘a’,’b’,’c’]</span><br><span class="line"><span class="keyword">if</span> ‘a’ <span class="keyword">in</span> theList:</span><br><span class="line"><span class="built_in">print</span> ‘a <span class="keyword">in</span> the <span class="built_in">list</span>’</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ‘d’ <span class="keyword">not</span> <span class="keyword">in</span> theList:</span><br><span class="line"><span class="built_in">print</span> ‘d <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">in</span> the <span class="built_in">list</span>’</span><br></pre></td></tr></table></figure>

<blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env -S -P$&#123;HOME&#125;/anaconda/bin python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re, os, shutil, time, sys, argparse</span><br><span class="line"><span class="keyword">from</span> itertools <span class="keyword">import</span> chain</span><br><span class="line"><span class="keyword">import</span> oss2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 需要替换url的MD文件</span></span><br><span class="line">md_file = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 操作类型, L2L (默认本地到本地)， L2W（本地到图床）， W2L（图床到本地）</span></span><br><span class="line">action = <span class="string">&#x27;L2L&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 保存图片文件的根目录</span></span><br><span class="line">dir_base = <span class="string">&#x27;/*******/_MD_Media&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Markdown中图片语法 ![](url) 或者 &lt;img src=&#x27;&#x27; /&gt;</span></span><br><span class="line">img_patten = <span class="string">r&#x27;!\[.*?\]\((.*?)\)|&lt;img.*?src=[\&#x27;\&quot;](.*?)[\&#x27;\&quot;].*?&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_img_local_path</span>(<span class="params">md_file, path</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    获取MD文件中嵌入图片的本地文件绝对地址</span></span><br><span class="line"><span class="string">    :param md_file: MD文件</span></span><br><span class="line"><span class="string">    :param path: 图片URL</span></span><br><span class="line"><span class="string">    :return: 图片的本地文件绝对地址</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    result = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># /a/b/c</span></span><br><span class="line">    <span class="keyword">if</span> path.startswith(<span class="string">&#x27;/&#x27;</span>):</span><br><span class="line">        result = path</span><br><span class="line">    <span class="comment"># ./a/b/c</span></span><br><span class="line">    <span class="keyword">elif</span> path.startswith(<span class="string">&#x27;.&#x27;</span>):</span><br><span class="line">        result = <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(os.path.dirname(md_file), path)</span><br><span class="line">    <span class="comment"># file:///a/b/c</span></span><br><span class="line">    <span class="keyword">elif</span> path.startswith(<span class="string">&#x27;file:///&#x27;</span>):</span><br><span class="line">        result = path[<span class="number">8</span>:]</span><br><span class="line">        result = result.replace(<span class="string">&#x27;%20&#x27;</span>,<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        result = <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(os.path.dirname(md_file), path)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">local_2_local</span>(<span class="params">md_file, dir_ts, <span class="keyword">match</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    把MD中的本地图片移动到指定目录下，并返回URL。 这里并没有进行URL的替换</span></span><br><span class="line"><span class="string">    :param md_file:</span></span><br><span class="line"><span class="string">    :param dir_ts:</span></span><br><span class="line"><span class="string">    :param match:</span></span><br><span class="line"><span class="string">    :return: new_url，新本地文件地址。如果不需要替换，就返回空</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    dir_tgt = <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(dir_base, dir_ts)</span><br><span class="line">    new_url = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># 判断是不是已经是一个图片的网址，或者已经在指定目录下</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (re.<span class="keyword">match</span>(<span class="string">&#x27;((http(s?))|(ftp))://.*&#x27;</span>, <span class="keyword">match</span>) <span class="keyword">or</span> re.<span class="keyword">match</span>(<span class="string">&#x27;&#123;&#125;/.*&#x27;</span>.<span class="built_in">format</span>(dir_base), <span class="keyword">match</span>)):</span><br><span class="line">        <span class="comment"># 如果图片url是本地文件，就替换到指定目录</span></span><br><span class="line">        img_file = get_img_local_path(md_file, <span class="keyword">match</span>)</span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(img_file):</span><br><span class="line">            new_url = <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(dir_tgt, os.path.basename(<span class="keyword">match</span>))</span><br><span class="line">            os.makedirs(dir_tgt, exist_ok=<span class="literal">True</span>)</span><br><span class="line">            <span class="comment"># 移动物理文件</span></span><br><span class="line">            shutil.move(img_file, dir_tgt)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> new_url</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">local_2_web</span>(<span class="params">md_file, dir_ts, <span class="keyword">match</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    把MD中的本地图片上传到OSS下，并返回URL。 这里并没有进行URL的替换</span></span><br><span class="line"><span class="string">    :param md_file:</span></span><br><span class="line"><span class="string">    :param dir_ts:</span></span><br><span class="line"><span class="string">    :param match:</span></span><br><span class="line"><span class="string">    :return: new_url，新本地文件地址。如果不需要替换，就返回空</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 阿里云OSS信息</span></span><br><span class="line">    bucket_name = <span class="string">&quot;b******ce&quot;</span></span><br><span class="line">    endpoint = <span class="string">&quot;http://oss-cn-beijing.aliyuncs.com&quot;</span></span><br><span class="line">    access_key_id = <span class="string">&quot;******&quot;</span></span><br><span class="line">    access_key_secret = <span class="string">&quot;******&quot;</span></span><br><span class="line">    web_img_prfix = <span class="string">&#x27;https://******.oss-cn-beijing.aliyuncs.com&#x27;</span></span><br><span class="line">    <span class="comment"># 创建Bucket对象，所有Object相关的接口都可以通过Bucket对象来进行</span></span><br><span class="line">    bucket = oss2.Bucket(oss2.Auth(access_key_id, access_key_secret), endpoint, bucket_name)</span><br><span class="line"></span><br><span class="line">    new_url = <span class="literal">None</span></span><br><span class="line">    <span class="comment"># 判断是不是已经是一个图片的网址</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> (re.<span class="keyword">match</span>(<span class="string">&#x27;((http(s?))|(ftp))://.*&#x27;</span>, <span class="keyword">match</span>) ):</span><br><span class="line">        <span class="comment"># 如果图片url是本地文件，就上传</span></span><br><span class="line">        img_file = get_img_local_path(md_file, <span class="keyword">match</span>)</span><br><span class="line">        <span class="keyword">if</span> os.path.isfile(img_file):</span><br><span class="line">            key_url = <span class="string">&#x27;&#123;0&#125;/&#123;1&#125;&#x27;</span>.<span class="built_in">format</span>(dir_ts, os.path.basename(<span class="keyword">match</span>))</span><br><span class="line">            bucket.put_object_from_file(key_url, img_file)</span><br><span class="line">            new_url = <span class="string">&#x27;&#123;&#125;/&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(web_img_prfix, key_url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> new_url</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">replace_md_url</span>(<span class="params">md_file</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    把指定MD文件中引用的图片移动到指定地点（本地或者图床），并替换URL</span></span><br><span class="line"><span class="string">    :param md_file: MD文件</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> os.path.splitext(md_file)[<span class="number">1</span>] != <span class="string">&#x27;.md&#x27;</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;不是Markdown文件，不做处理。&#x27;</span>.<span class="built_in">format</span>(md_file))</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    cnt_replace = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 本次操作时间戳</span></span><br><span class="line">    dir_ts = time.strftime(<span class="string">&#x27;%Y-%m-%d-%H-%M-%S&#x27;</span>, time.localtime())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(md_file, <span class="string">&#x27;r&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f: <span class="comment">#使用utf-8 编码打开</span></span><br><span class="line">        post = f.read()</span><br><span class="line">        matches = re.<span class="built_in">compile</span>(img_patten).findall(post)</span><br><span class="line">        <span class="keyword">if</span> matches <span class="keyword">and</span> <span class="built_in">len</span>(matches)&gt;<span class="number">0</span> :</span><br><span class="line">            <span class="comment"># 多个group整合成一个列表</span></span><br><span class="line">            <span class="keyword">for</span> <span class="keyword">match</span> <span class="keyword">in</span> <span class="built_in">list</span>(chain(*matches)) :</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">match</span> <span class="keyword">and</span> <span class="built_in">len</span>(<span class="keyword">match</span>)&gt;<span class="number">0</span> :</span><br><span class="line">                    new_url = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment"># 进行不同类型的URL转换操作</span></span><br><span class="line">                    <span class="keyword">if</span> action == <span class="string">&#x27;L2L&#x27;</span>:</span><br><span class="line">                        new_url = local_2_local(md_file, dir_ts, <span class="keyword">match</span>)</span><br><span class="line">                    <span class="keyword">elif</span> action == <span class="string">&#x27;L2W&#x27;</span>:</span><br><span class="line">                        new_url = local_2_web(md_file, dir_ts, <span class="keyword">match</span>)</span><br><span class="line"></span><br><span class="line">                    <span class="comment"># 更新MD中的URL</span></span><br><span class="line">                    <span class="keyword">if</span> new_url :</span><br><span class="line">                        post = post.replace(<span class="keyword">match</span>, new_url)</span><br><span class="line">                        cnt_replace = cnt_replace + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果有内容的话，就直接覆盖写入当前的markdown文件</span></span><br><span class="line">        <span class="keyword">if</span> post <span class="keyword">and</span> cnt_replace &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">open</span>(md_file, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>).write(post)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;&#123;0&#125;的&#123;1&#125;个URL被替换到&lt;&#123;2&#125;&gt;/&#123;3&#125;&#x27;</span>.<span class="built_in">format</span>(os.path.basename(md_file), cnt_replace, action, dir_ts))</span><br><span class="line">        <span class="keyword">elif</span> cnt_replace == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125;中没有需要替换的URL&#x27;</span>.<span class="built_in">format</span>(os.path.basename(md_file)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    parser = argparse.ArgumentParser()</span><br><span class="line"></span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;--file&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;文件Full file name ofMarkdown file.&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-a&#x27;</span>, <span class="string">&#x27;--action&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;操作类型： L2L, L2W, W2L .&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-d&#x27;</span>, <span class="string">&#x27;--dir&#x27;</span>, <span class="built_in">help</span>=<span class="string">&#x27;Base directory to store MD images.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> args.action:</span><br><span class="line">        action = args.action</span><br><span class="line">    <span class="keyword">if</span> args.<span class="built_in">dir</span>:</span><br><span class="line">        dir_base = args.<span class="built_in">dir</span></span><br><span class="line">    <span class="keyword">if</span> args.file:</span><br><span class="line">        replace_md_url(args.file)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="优化链接地址"><a href="#优化链接地址" class="headerlink" title="优化链接地址"></a>优化链接地址</h3><p>hexo默认的链接是<a target="_blank" rel="noopener" href="http://xxx.xxxx.com/2019/09/25/hello-world%E8%BF%99%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%EF%BC%8C%E8%BF%99%E6%BA%90%E4%BA%8E%E7%AB%99%E7%82%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E9%85%8D%E7%BD%AE_config.yml%E9%87%8C%E7%9A%84%E9%85%8D%E7%BD%AE:permalink">http://xxx.xxxx.com/2019/09/25/hello-world这种类型的，这源于站点目录下的配置_config.yml里的配置:permalink</a>: :year/:month/:day/:title/.这种默认配置的缺陷是就是一般我们文章的名字是中文的时候，链接地址就会会出现一大串，此外不利于seo。年月日都会有分隔符。下面就优化一下链接</p>
<ul>
<li>使用 <code>hexo-abbrlink</code>这个插件</li>
<li>后期修改一下 <code>hexo-asset-image</code>配置 完美解决</li>
</ul>
<p>安装插件(在你的本地网站目录)</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure>

<p>在<code>站点配置文件</code>中查找代码<code>permalink</code>，将其更改为:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">permalink<span class="punctuation">:</span> post/<span class="punctuation">:</span>abbrlink.html</span><br><span class="line">abbrlink<span class="punctuation">:</span></span><br><span class="line">  alg<span class="punctuation">:</span> crc32  # 算法：crc16(default) and crc32</span><br><span class="line">  rep<span class="punctuation">:</span> hex    # 进制：dec(default) and hex</span><br></pre></td></tr></table></figure>

<p>然后去修改我们的 网站目录下面的 <code>scaffolds</code>目录 下面的 <code>post.md</code></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> title <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">date<span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#123;</span> date <span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br><span class="line">comments<span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">categories<span class="punctuation">:</span></span><br><span class="line">tags<span class="punctuation">:</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure>

<p>这样 之后，我们重新 运行  <code>hexo clean</code> 和 <code>hexo g</code> 发现我们的网址 已经变了</p>
<p><strong>PS:2020年1月11日 我更新插件后 发现 已经 可以自动匹配了 所以 下面的这个解决方案 可以忽略了</strong> </p>
<p>下面是最新的代码  已经 不需要修改了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ($(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">         <span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">         <span class="keyword">var</span> src = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>).<span class="title function_">replace</span>(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">         <span class="keyword">if</span>(!(<span class="regexp">/http[s]*.*|\/\/.*/</span>.<span class="title function_">test</span>(src)</span><br><span class="line">           || <span class="regexp">/^\s+\//</span>.<span class="title function_">test</span>(src)</span><br><span class="line">           || <span class="regexp">/^\s*\/uploads|images\//</span>.<span class="title function_">test</span>(src))) &#123;</span><br><span class="line">           <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">           <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">           <span class="keyword">var</span> linkArray = link.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">             <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="keyword">var</span> srcArray = src.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">             <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">           &#125;);</span><br><span class="line">           <span class="keyword">if</span>(srcArray.<span class="property">length</span> &gt; <span class="number">1</span>)</span><br><span class="line">           srcArray.<span class="title function_">shift</span>();</span><br><span class="line">           src = srcArray.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line"></span><br><span class="line">           $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, config.<span class="property">root</span> + link + src);</span><br><span class="line">           <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.<span class="property">root</span> + link + src);</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">         <span class="variable language_">console</span>.<span class="property">info</span>&amp;&amp;<span class="variable language_">console</span>.<span class="title function_">info</span>($(<span class="variable language_">this</span>));</span><br><span class="line">       &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><del>但是此时我发现和我另外一个插件有图片链接的冲突，我的图片地址找不到正确的链接，此时我们去修改我们的插件</del></p>
<ol>
<li><p><del>打开我们的插件目录 找到 对应的 <code>xxx\node_modules\_hexo-asset-image@0.0.3@hexo-asset-image\index.js</code>文件</del></p>
</li>
<li><p><del>修改部分代码（这个根据你的情况修改，我的如下）</del></p>
<ul>
<li><del>在源码的12行附近<code>var link = data.permalink;</code>这一行的下面，<strong>添加</strong> 一行<code>var abbrlink = data.abbrlink</code>（声明一个变量 为 abbrlink）</del></li>
<li><del>在44行附近，修改代码 原代码</del></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(linkArray[linkArray.<span class="property">length</span> - <span class="number">1</span>] == srcArray[<span class="number">0</span>])</span><br><span class="line">	srcArray.<span class="title function_">shift</span>();</span><br><span class="line">src = srcArray.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><del>修改后：</del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(linkArray[linkArray.<span class="property">length</span> - <span class="number">1</span>] == srcArray[<span class="number">0</span>])</span><br><span class="line">	    srcArray.<span class="title function_">shift</span>();</span><br><span class="line">	  <span class="keyword">if</span>(srcArray[<span class="number">0</span>]!==abbrlink)srcArray[<span class="number">0</span>]=abbrlink;</span><br><span class="line">         src = srcArray.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><del>直接贴上我最后的修改文件吧：<code>index.js</code></del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getPosition</span>(<span class="params">str, m, i</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">split</span>(m, i).<span class="title function_">join</span>(m).<span class="property">length</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">filter</span>.<span class="title function_">register</span>(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.<span class="property">config</span>;</span><br><span class="line">  <span class="keyword">if</span>(config.<span class="property">post_asset_folder</span>)&#123;</span><br><span class="line">    <span class="keyword">var</span> link = data.<span class="property">permalink</span>;</span><br><span class="line">	<span class="keyword">var</span> abbrlink = data.<span class="property">abbrlink</span></span><br><span class="line">	<span class="keyword">var</span> beginPos = <span class="title function_">getPosition</span>(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">	<span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.<span class="title function_">substring</span>(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.<span class="property">length</span>; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.<span class="title function_">load</span>(data[key], &#123;</span><br><span class="line">        <span class="attr">ignoreWhitespace</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">xmlMode</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">lowerCaseTags</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">decodeEntities</span>: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).<span class="title function_">each</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">		<span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">        <span class="keyword">var</span> src = $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>).<span class="title function_">replace</span>(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.<span class="title function_">test</span>(src))&#123;</span><br><span class="line">		  <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">		  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">		  <span class="keyword">var</span> linkArray = link.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">		    <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">		  &#125;);</span><br><span class="line">		  <span class="keyword">var</span> srcArray = src.<span class="title function_">split</span>(<span class="string">&#x27;/&#x27;</span>).<span class="title function_">filter</span>(<span class="keyword">function</span>(<span class="params">elem</span>)&#123;</span><br><span class="line">		    <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">		  &#125;);</span><br><span class="line">		  <span class="keyword">if</span>(linkArray[linkArray.<span class="property">length</span> - <span class="number">1</span>] == srcArray[<span class="number">0</span>])</span><br><span class="line">		    srcArray.<span class="title function_">shift</span>();</span><br><span class="line">		  <span class="keyword">if</span>(srcArray[<span class="number">0</span>]!==abbrlink)srcArray[<span class="number">0</span>]=abbrlink;</span><br><span class="line">          src = srcArray.<span class="title function_">join</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">          $(<span class="variable language_">this</span>).<span class="title function_">attr</span>(<span class="string">&#x27;src&#x27;</span>, <span class="string">&#x27;/&#x27;</span> + link + src);</span><br><span class="line">		  <span class="comment">// $(this).attr(&#x27;src&#x27; , &#x27;/&#x27; + link + abbrlink + &#x27;/&#x27; + src);</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.<span class="title function_">html</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>重新hexo clean 和 hexo g，即可生效。</li>
</ol>
<p><strong>注意：最后这个冲突问题，你根据自己目录实际需要修改代码即可</strong></p>
</li>
</ol>
<h4 id="原文部分引用"><a href="#原文部分引用" class="headerlink" title="原文部分引用"></a>原文部分引用</h4><blockquote>
<p>方法如下</p>
<p>编辑<code>xxx\node_modules\_hexo-asset-image@0.0.3@hexo-asset-image\index.js</code>文件<br>1、在源码的12行附近<code>var link = data.permalink;</code>这一行的下面，<strong>添加</strong> 一行<code>var abbrlink = data.abbrlink</code><br>（意思是定义一个变量abbrlink）<br>2、在44行附近，源码的<code> $(this).attr(&#39;src&#39; , &#39;/&#39; + link + src);</code>这一行，<strong>修改</strong> 为下面一行：<br><code>$(this).attr(&#39;src&#39; , &#39;/&#39; + link + abbrlink + &#39;/&#39; + src);</code><br>（意思是生成的图片链接中，拼接abbrlink）</p>
<p>然后重新hexo clean 和 hexo g，即可生效。<br>_posts文件夹下的文章，按照自己喜欢的方式整理，生成的链接是正常的，在typora中可以正常显示。</p>
</blockquote>
<p><del>如果你的permalink加了后缀的话, 例如我的 <code>permalink: p/:abbrlink.html</code></del><br><del>编辑xxx\<a href="mailto:&#110;&#111;&#x64;&#101;&#95;&#109;&#x6f;&#x64;&#x75;&#108;&#101;&#x73;&#95;&#x68;&#101;&#x78;&#111;&#45;&#97;&#115;&#x73;&#101;&#116;&#45;&#x69;&#109;&#x61;&#103;&#x65;&#64;&#48;&#x2e;&#48;&#46;&#x33;">&#110;&#111;&#x64;&#101;&#95;&#109;&#x6f;&#x64;&#x75;&#108;&#101;&#x73;&#95;&#x68;&#101;&#x78;&#111;&#45;&#97;&#115;&#x73;&#101;&#116;&#45;&#x69;&#109;&#x61;&#103;&#x65;&#64;&#48;&#x2e;&#48;&#46;&#x33;</a>@hexo-asset-image\index.js文件, index多减个值</del></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="regexp">/.*\/index\.html$/</span>.<span class="title function_">test</span>(link)) &#123;</span><br><span class="line">     <span class="comment">// when permalink is end with index.html, for example 2019/02/20/xxtitle/index.html</span></span><br><span class="line">     <span class="comment">// image in xxtitle/ will go to xxtitle/index/</span></span><br><span class="line">     appendLink = <span class="string">&#x27;index/&#x27;</span>;</span><br><span class="line">     <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="comment">// var endPos = link.length-1; // 换成下面的这句话</span></span><br><span class="line">     <span class="keyword">var</span> endPos = link.<span class="property">length</span>-<span class="number">5</span>; <span class="comment">//因为我的permalink: p/:abbrlink.html,  这里要改成-5</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<h3 id="2021-09-22-更新"><a href="#2021-09-22-更新" class="headerlink" title="2021-09-22  更新"></a>2021-09-22  更新</h3><p>如果使用最新的hexo 版本 5.x 和 最新的插件版本 发现 源码已经改变了，如果遇到图片不能正常显示，此时需要检查网页的源代码：</p>
<p>此时 <code>config.yml</code> 文件</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">url<span class="punctuation">:</span> https<span class="punctuation">:</span><span class="comment">//jsroads.gitee.io</span></span><br><span class="line">permalink<span class="punctuation">:</span> <span class="punctuation">:</span>year/<span class="punctuation">:</span>month/<span class="punctuation">:</span>day/<span class="punctuation">:</span>title/</span><br></pre></td></tr></table></figure>

<p>但是我们打印出来的图片路径 是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update <span class="built_in">link</span> as:--&gt;/.io//image-20210922130821755.png</span><br><span class="line">update <span class="built_in">link</span> as:--&gt;/.io//image-20210922130821755.png</span><br></pre></td></tr></table></figure>

<p>经过查找问题出在 <code>项目根目录/node_modules/hexo-asset-image/index.js</code>的23行左右</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="regexp">/.*\/index\.html$/</span>.<span class="title function_">test</span>(link)) &#123;</span><br><span class="line">  <span class="comment">// when permalink is end with index.html, for example 2019/02/20/xxtitle/index.html</span></span><br><span class="line">  <span class="comment">// image in xxtitle/ will go to xxtitle/index/</span></span><br><span class="line">  appendLink = <span class="string">&#x27;index/&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>发现 这个走了 else 分支导致的，我们把 <code>link.lastIndexOf(&#39;.&#39;)</code> 修改为 <code>link.lastIndexOf(&#39;/&#39;)</code> 即可 修改后</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="regexp">/.*\/index\.html$/</span>.<span class="title function_">test</span>(link)) &#123;</span><br><span class="line">  <span class="comment">// when permalink is end with index.html, for example 2019/02/20/xxtitle/index.html</span></span><br><span class="line">  <span class="comment">// image in xxtitle/ will go to xxtitle/index/</span></span><br><span class="line">  appendLink = <span class="string">&#x27;index/&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> endPos = link.<span class="title function_">lastIndexOf</span>(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重新 清理运行 ： <code>hexo clean &amp; hexo g</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update <span class="built_in">link</span> as:--&gt;/2021/09/18/hello-world/image-20210922130821755.png</span><br><span class="line">update <span class="built_in">link</span> as:--&gt;/2021/09/18/hello-world/image-20210922130821755.png</span><br></pre></td></tr></table></figure>

<p>然后运行效果 正常 以上OK</p>
<h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>其实很多事情，有了目标，就朝着这个目标努力，虽然未必能真正做到自己最初的想法，但是起码不会原地不动，至少是开卷有益，有时候还有意外的学习收获。</p>
<h3 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h3><ul>
<li><a target="_blank" rel="noopener" href="https://juejin.im/post/5af2ad0c6fb9a07ac363758b">用python批量替换MD文件中的图片地址</a></li>
<li><a target="_blank" rel="noopener" href="https://yanyinhong.github.io/2017/05/03/How-to-delete-useless-tags-and-categories/">Hexo博客搭建之删除无用的tags和categories</a></li>
<li><a target="_blank" rel="noopener" href="http://yangq.me/post/19acb239">hexo链接持久化终极解决之道</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/rozbo/hexo-abbrlink/issues/19">hexo-abbrlink  Issues</a></li>
</ul>

  </div>
  <!--文末结束语-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- 本文结束 <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--页脚广告-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
      <a rel="prev" class="post-nav-item mdui-float-left" href="/post/327c6098.html">
        <i class="iconfont icon-angle-left"></i>
        <span>Mac环境如何生成项目目录树形结构</span>
      </a>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/post/3f34ea36.html">
        <span>Layabox2.3.0如何配置代码编辑器(WebStorm2019)</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/post/f967797a.html" id="toc-header" class="mdui-ripple">文章目录</a>
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E5%9B%9B%E9%83%A8%E6%9B%B2"><span class="toc-number">1.</span> <span class="toc-text">优化四部曲</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.1.</span> <span class="toc-text">更改格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E6%A0%BC%E5%BC%8F-1"><span class="toc-number">1.2.</span> <span class="toc-text">更改格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%A4%9A%E4%BD%99%E7%9A%84%E5%9B%BE%E7%89%87"><span class="toc-number">1.3.</span> <span class="toc-text">删除多余的图片</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%86%97%E4%BD%99%E5%9B%BE%E7%89%87nodejs%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">删除冗余图片nodejs版本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#blogDelUnusedPic-js-%E5%86%85%E5%AE%B9%E6%9B%B4%E6%96%B0%E4%BA%8E2024-07-20"><span class="toc-number">2.1.</span> <span class="toc-text">blogDelUnusedPic.js 内容更新于2024-07-20</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">关键点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.3.</span> <span class="toc-text">使用方法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8B%E9%9D%A2%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B-Python3-%E5%B8%B8%E7%94%A8%E7%9A%84%E4%B8%80%E4%BA%9B%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">下面记录一下 Python3 常用的一些操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%98%E5%8C%96%E9%93%BE%E6%8E%A5%E5%9C%B0%E5%9D%80"><span class="toc-number">4.</span> <span class="toc-text">优化链接地址</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E6%96%87%E9%83%A8%E5%88%86%E5%BC%95%E7%94%A8"><span class="toc-number">4.1.</span> <span class="toc-text">原文部分引用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2021-09-22-%E6%9B%B4%E6%96%B0"><span class="toc-number">5.</span> <span class="toc-text">2021-09-22  更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8E%E8%AE%B0"><span class="toc-number">6.</span> <span class="toc-text">后记</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5"><span class="toc-number">7.</span> <span class="toc-text">参考链接</span></a></li></ol>
      </li>
    </ul>
  </div>



  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
        <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank"></a>
      
      <span>
        &copy; 2018 - 2025 
        
          <span style="color:#d9333f" class="iconfont icon-heart"></span>
        
        asroads
      </span>
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span>Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span>Theme: <a href="https://github.com/kb1000fx/Meadow" rel="noopener" target="_blank">Meadow</a></span>
        </div>
      
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span id="busuanzi_container_site_uv" style="display: none;"> <span class="iconfont icon-user"></span>总访客量 <span id="busuanzi_value_site_uv"></span></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span id="busuanzi_container_site_pv" style="display: none;"> <span class="iconfont icon-eye"></span>总访问量 <span id="busuanzi_value_site_pv"></span></span>
        </div>
      
    </div>
 </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  

    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    
<script src="/js/mdui.min.v1.0.0.js"></script>




<script src="/js/meadow.js"></script>

</body>
</html >