<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Regular.woff2" as="font">
        <link rel="preload" crossorigin="crossorigin" href="/fonts/roboto/Roboto-Bold.woff2" as="font">
    
    
    
        <link rel="shortcut icon" href="/icons/favicon.ico">
    

    
    
        
<link rel="stylesheet" href="/css/mdui.min.v1.0.0.css">

    
    
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/iconfont.css">


    
    












          


    
    
    <title>
        
            CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ | Asroads&#39;Blog
        
    </title>
    
    
<meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Asroads'Blog" type="application/atom+xml">
</head>
<body class="mdui-drawer-body-left mdui-appbar-with-toolbar mdui-theme-primary-teal mdui-theme-accent-blue">
  
  <header class="mdui-appbar mdui-appbar-fixed">
  <div id="toolbar" class="mdui-toolbar mdui-color-theme">
    <button class="mdui-btn mdui-btn-icon" mdui-drawer="{target: '#sidebar', swipe: true}"><i class="iconfont icon-menu"></i></button>
    <a href="/" class="mdui-typo-headline">Asroads&#39;Blog</a>
    <a href="/" class="header-subtitle mdui-typo-headline">å›å­ä¸å™¨</a>
    <div class="mdui-toolbar-spacer"></div>
    <button class="mdui-btn mdui-btn-icon" mdui-dialog="{target: '#search'}" mdui-tooltip="{content: 'search'}"><i class="iconfont icon-search"></i></button>
  </div>
</header>

<div class="mdui-dialog" id="search">
  
    <div class="search-form">
      <input type="search" class="search-form-input" placeholder="è¯·è¾“å…¥å…³é”®å­—" onfocus="listenSearchFunc()">
    </div>
    <div class="search-result" data-resource="/search.xml"></div>
  
</div>

  <aside id="sidebar" class="mdui-drawer">
    <div class="mdui-tab" mdui-tab>
        <a href="#sidebar-tab1" id="sidebartab" class="mdui-ripple mdui-tab-active">ç«™ç‚¹æ¦‚è§ˆ</a>
        <a href="#sidebar-tab2" id="sidebartab" class="mdui-ripple">å…³äº</a>
    </div>

    
    <div id="sidebar-tab1" class="mdui-p-a-1">
        <div class="mdui-list">
            
                
                <a href="/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-home"></i>
                    </div>
                    <div class="mdui-list-item-content">é¦–é¡µ</div>
                </a>
            
                
                <a href="/categories/game" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-folder"></i>
                    </div>
                    <div class="mdui-list-item-content">æ‰‹æ¸¸</div>
                </a>
            
                
                <a href="/categories/tool/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-tools"></i>
                    </div>
                    <div class="mdui-list-item-content">æŠ€æœ¯</div>
                </a>
            
                
                <a href="/categories/other" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-gallery"></i>
                    </div>
                    <div class="mdui-list-item-content">æ‚é¡¹</div>
                </a>
            
                
                <a href="/categories/life" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-blog"></i>
                    </div>
                    <div class="mdui-list-item-content">æ„Ÿæ‚Ÿ</div>
                </a>
            
                
                <a href="/tags/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-bookmark"></i>
                    </div>
                    <div class="mdui-list-item-content">æ ‡ç­¾</div>
                </a>
            
                
                <a href="/archives/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-archive"></i>
                    </div>
                    <div class="mdui-list-item-content">å½’æ¡£</div>
                </a>
            
                
                <a href="/about/" class="mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-user"></i>
                    </div>
                    <div class="mdui-list-item-content">å…³äº</div>
                </a>
            
            <div class="mdui-list-item mdui-ripple">
                <div class="mdui-list-item-icon">
                    <i class="iconfont icon-moon"></i>
                </div>
                <div class="mdui-list-item-content">å¤œé—´æ¨¡å¼</div>
                <label class="mdui-switch" id="darkmode">
                  <input type="checkbox" id="nightmode_switch"/>
                  <i class="mdui-switch-icon"></i>
                </label>
            </div>           
        </div>
    </div>

    
    <div id="sidebar-tab2" class="mdui-p-a-1">
        <div class="sidebar-overview">
            <div class="sidebar-avatar">
                
                    <img src="/icons/avatar.png"/>
                
            </div>
            <div class="sidebar-author-name">asroads</div>
            <div class="sidebar-description">è‡ªä¿¡æ˜¯æˆåŠŸç¬¬ä¸€æ³•å®</div>
        </div>
        <div class="sidebar-links">
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-mail"></i></span>
                    <a href="/jsroads@163.com" class="mdui-chip-title">E-Mail</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/jsroads" class="mdui-chip-title">jsroads</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-github"></i></span>
                    <a target="_blank" rel="noopener" href="https://github.com/asroads" class="mdui-chip-title">asroads</a>
                </div>
            
                
                <div class="mdui-chip">
                    <span class="mdui-chip-icon"><i class="iconfont icon-qq"></i></span>
                    <a target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&k=fTVxmSSA" class="mdui-chip-title">QQç¾¤</a>
                </div>
            
        </div>
        <ul class="mdui-list" mdui-collapse="{accordion: true}">
            <li class="mdui-collapse-item">
                <div class="mdui-collapse-item-header mdui-list-item mdui-ripple">
                    <div class="mdui-list-item-icon">
                        <i class="iconfont icon-link"></i>
                    </div>
                    <div class="mdui-list-item-content">å‹æƒ…é“¾æ¥</div>
                    <div class="mdui-collapse-item-arrow">
                        <i class="mdui-list-item-icon iconfont icon-angle-down"></i>
                    </div>
                </div>
                <ul id="linksList" class="mdui-collapse-item-body mdui-list mdui-list-dense">
                    
                        <a target="_blank" rel="noopener" href="https://seazhang.github.io/" class="mdui-list-item mdui-ripple">
                            éº¦ç”°å®ˆæœ›è€…
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://zhaoyabo.github.io/" class="mdui-list-item mdui-ripple">
                            YABOçš„åšå®¢
                        </a>
                    
                        <a target="_blank" rel="noopener" href="https://dreamheavenyang.github.io/" class="mdui-list-item mdui-ripple">
                            DreamHeaven
                        </a>
                    
                </ul>
            </li>
        </ul>
    </div>

    <div class="mdui-divider"></div>
    
    
</aside>
  
  <main id="main-contain" class="mdui-container mdui-m-t-5">
    <article id="article" class="mdui-card mdui-p-b-2 mdui-m-b-5">
  <header class="mdui-card-media">
    
    
      <div class="post-header"> 
  <a class="post-header-title" href="/post/8fa65a01.html">CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ</a>
  <div class="post-header-meta">
    <span>
      <span class="iconfont icon-calendar"></span>
      å‘å¸ƒäº:&nbsp;2023-08-05
    </span>
    <span>
      <span class="iconfont icon-calendar-check"></span>
      æ›´æ–°äº:&nbsp;2025-01-01
    </span>
    <span>
      <span class="iconfont icon-folder"></span>
      åˆ†ç±»äº:&nbsp;<a class="category-link" href="/categories/game/">game</a>
    </span>
    
      <span>
        <span class="iconfont icon-eye"></span>
        é˜…è¯»æ¬¡æ•°:&nbsp;
        <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
      </span>
    
  </div>
</div>   
    



    
    
    <div class="mdui-card-menu">
    
      <button class="mdui-btn mdui-btn-icon mdui-text-color-teal" mdui-menu="{target: '#share_menu', align: 'right'}"><i class="iconfont icon-share"></i></button>
      <ul class="mdui-menu" id="share_menu">
        <li class="mdui-menu-item">
          <a href="http://service.weibo.com/share/share.php?appkey=&title=CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ&url=http://blog.asroads.com/post/8fa65a01.html&pic=http://blog.asroads.com/icons/favicon.ico&searchPic=false&style=simple" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° Weibo</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://twitter.com/intent/tweet?text=CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ&url=http://blog.asroads.com/post/8fa65a01.html&via=asroads" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° Twitter</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.facebook.com/sharer/sharer.php?u=http://blog.asroads.com/post/8fa65a01.html" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° Facebook</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://plus.google.com/share?url=http://blog.asroads.com/post/8fa65a01.html" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° Google+</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://blog.asroads.com/post/8fa65a01.html&title=CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° LinkedIn</a>
        </li>
        <li class="mdui-menu-item">
          <a href="http://connect.qq.com/widget/shareqq/index.html?site=Asroads&#39;Blog&title=CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ&summary=è‡ªä¿¡æ˜¯æˆåŠŸç¬¬ä¸€æ³•å®&pics=http://blog.asroads.com/icons/favicon.ico&url=http://blog.asroads.com/post/8fa65a01.html" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° QQ</a>
        </li>
        <li class="mdui-menu-item">
          <a href="https://telegram.me/share/url?url=http://blog.asroads.com/post/8fa65a01.html&text=CocosCreator2.4.xæ„å»ºåä¸ºå¿«æ¸¸æˆ" target="_blank" class="mdui-ripple">åˆ†äº«åˆ° Telegram</a>
        </li>
      </ul>
    
  </div>
  </header>
  
  
  
  
  <div class="post-tags">
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/Cocos/ >Cocos</a>
      </i>
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/%E5%B0%8F%E6%B8%B8%E6%88%8F/ >å°æ¸¸æˆ</a>
      </i>
    
      <i class="iconfont icon-tag">
        <a rel="tag" href = /tags/%E5%8D%8E%E4%B8%BA/ >åä¸º</a>
      </i>
    
  </div>

  
  <div class="mdui-card-content mdui-typo mdui-p-x-4">
    <p>æœ¬æ¥ä»¥ä¸ºå°æ¸¸æˆçš„æ•™ç¨‹å’Œæ–‡ç« æœ‰å¾ˆå¤šï¼Œåƒè¿™ç§ä¸€é”®å‘å¸ƒçš„å°æ¸¸æˆï¼Œæ— éå°±æ˜¯è·Ÿå¾®ä¿¡æˆ–æŠ–éŸ³å°æ¸¸æˆä¸€æ ·ï¼Œå¾ˆå®¹æ˜“æ¥å…¥ï¼Œä¸€èˆ¬æ¸¸æˆ<code>API</code>æ¥å…¥ï¼Œæ— å¤–ä¹ï¼Œç™»é™†ã€è§†é¢‘å¹¿å‘Šã€<code>Banner</code>å¹¿å‘Šã€æ”¯ä»˜ç­‰é€»è¾‘ï¼Œä¸€èˆ¬éƒ½æœ‰ä¸€äº›è·å–å¯åŠ¨å‚æ•°ï¼Œæˆ–è€…å°æ¸¸æˆé¡¶éƒ¨åŒºåŸŸé€‚é…ç­‰ï¼Œå´ä¸æ›¾æƒ³ï¼Œä½¿ç”¨<code>CocosCreator</code>æ„å»ºåä¸ºå¿«æ¸¸æˆçš„æ—¶å€™ï¼Œè¿˜ä¼šæœ‰ä¸€äº›æ„å¤–çš„è¸©å‘å’Œæ³¨æ„åœ°æ–¹ï¼Œä¸‹é¢å°±è¯´ä¸€ä¸‹ï¼Œå¦‚ä½•ä½¿ç”¨<code>CocosCreator</code>æ„å»ºå‡ºåä¸ºå¿«æ¸¸æˆã€‚</p>
<span id="more"></span>

<h2 id="å‰ç½®ç¯å¢ƒ"><a href="#å‰ç½®ç¯å¢ƒ" class="headerlink" title="å‰ç½®ç¯å¢ƒ"></a>å‰ç½®ç¯å¢ƒ</h2><p> æœ¬æ–‡çš„ç”µè„‘ç¯å¢ƒå¦‚ä¸‹ï¼š</p>
<ul>
<li><code>Mac</code>ç”µè„‘</li>
<li><code>CocosCreator</code> 2.4.11</li>
<li>å°ç±³æ‰‹æœºä¸€éƒ¨</li>
<li>åä¸ºæ‰‹æœºä¸€éƒ¨</li>
</ul>
<p>éœ€è¦å®‰è£…çš„è½¯ä»¶ ï¼š<code>Cocos Creator</code> å’Œ åä¸ºå¿«æ¸¸æˆå¼€å‘å·¥å…·</p>
<p>é¦–å…ˆæˆ‘ä»¬ç»™å‡ºä¸‹é¢å‡ ä¸ªæ–‡æ¡£åœ°å€ï¼šå¤§å®¶å…ˆç†Ÿæ‚‰ä¸€ä¸‹å¤§æ¦‚çš„å†…å®¹ï¼Œç„¶åè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œ</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.cocos.com/creator/2.4/manual/zh/publish/publish-huawei-quick-games.html">å‘å¸ƒåˆ°åä¸ºå¿«æ¸¸æˆ</a></li>
<li><a target="_blank" rel="noopener" href="https://developer.huawei.com/consumer/cn/doc/development/quickApp-Guides/quickgame-dev-runtimegame-guide-0000001159778255">Runtimeå¿«æ¸¸æˆå¼€å‘æŒ‡å¯¼</a></li>
</ul>
<p>æ–‡æ¡£ç†Ÿæ‚‰åï¼Œæˆ‘ä»¬è¿™è¾¹è¿˜éœ€è¦å»ç”³è¯·ç›¸åº”çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™é‡Œä¸»è¦æ˜¯ä¸€ä¸ªå’Œå¾®ä¿¡å°æ¸¸æˆå¾ˆç›¸ä¼¼çš„ä¸œè¥¿å«åšAppIdã€‚</p>
<h3 id="å…³äºç­¾å"><a href="#å…³äºç­¾å" class="headerlink" title="å…³äºç­¾å"></a>å…³äºç­¾å</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é€šè¿‡ openssl å‘½ä»¤å·¥å…·ç”Ÿæˆç­¾åæ–‡ä»¶</span></span><br><span class="line">openssl req -newkey rsa:2048 -nodes -keyout private.pem -x509 -days 3650 -out certificate.pem</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -text -<span class="keyword">in</span> certificate.pem</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹certificate.crtè¯ä¹¦çš„åˆ°æœŸæ—¶é—´</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -<span class="keyword">in</span> certificate.pem -noout -dates</span><br></pre></td></tr></table></figure>

<h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ol>
<li>æ–°å»ºä¸€ä¸ª<code>CocosCreator</code>é¡¹ç›®</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805220836245.png" alt="image-20230805220836245"></p>
<ol start="2">
<li>è¿™é‡Œæˆ‘éšä¾¿å†™äº†ä¸€ä¸ªç•Œé¢ï¼Œç„¶åå¼€å§‹æ„å»ºæ¸¸æˆ</li>
</ol>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;ccclass, property&#125; = cc.<span class="property">_decorator</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ccclass</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">AppGame</span> <span class="keyword">extends</span> <span class="title class_ inherited__">cc.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@property</span>(cc.<span class="property">Label</span>)</span><br><span class="line">    <span class="attr">label</span>: cc.<span class="property">Label</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@property</span></span><br><span class="line">    <span class="attr">text</span>: <span class="built_in">string</span> = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    start () &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ ~ f:AppGame m:start l:13-&gt;&quot;</span>, <span class="string">&quot;é¦–æ¬¡åœºæ™¯å¯åŠ¨&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="title class_">Browser</span>.<span class="property">onHWMiniGame</span>&amp;&amp;!<span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">inited</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> env = qg.<span class="property">env</span>;</span><br><span class="line">            <span class="keyword">const</span> <span class="variable constant_">USER_DATA_PATH</span> = qg.<span class="property">env</span>.<span class="property">USER_DATA_PATH</span>;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ ~ f:AppGame m:start l:19-&gt;&quot;</span>, env);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ ~ f:AppGame m:USER_DATA_PATH l:20-&gt;&quot;</span>, <span class="variable constant_">USER_DATA_PATH</span>);</span><br><span class="line">            <span class="keyword">const</span> res = qg.<span class="title function_">getSystemInfoSync</span>();</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;on getSystemInfoSync: success =&quot;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res));</span><br><span class="line"></span><br><span class="line">            <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="title function_">initData</span>();</span><br><span class="line">            <span class="comment">// qg.exitApplication(&#123;</span></span><br><span class="line">            <span class="comment">//     success : function () &#123;</span></span><br><span class="line">            <span class="comment">//         console.log(&quot;exitApplication success&quot; );</span></span><br><span class="line">            <span class="comment">//     &#125;,</span></span><br><span class="line">            <span class="comment">//     fail:function()&#123;</span></span><br><span class="line">            <span class="comment">//         console.log(&quot;exitApplication fail&quot;);</span></span><br><span class="line">            <span class="comment">//     &#125;,</span></span><br><span class="line">            <span class="comment">//     complete:function() &#123;</span></span><br><span class="line">            <span class="comment">//         console.log(&quot;exitApplication complete&quot;);</span></span><br><span class="line">            <span class="comment">//     &#125;</span></span><br><span class="line">            <span class="comment">// &#125;);</span></span><br><span class="line">            qg.<span class="title function_">onHide</span>(<span class="variable language_">this</span>.<span class="property">onHideHandler</span>);</span><br><span class="line">            qg.<span class="title function_">onShow</span>(<span class="variable language_">this</span>.<span class="property">onShowHandler</span>);</span><br><span class="line">            qg.<span class="title function_">onError</span>(</span><br><span class="line">                <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onError message = &quot;</span> + res.<span class="property">message</span> + <span class="string">&quot;, stack = &quot;</span> + res.<span class="property">stack</span>);&#125;</span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Browser</span>.<span class="property">onHWMiniGame</span>)&#123;</span><br><span class="line">            <span class="keyword">const</span> options = qg.<span class="title function_">getLaunchOptionsSync</span>();</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ ~ f:AppGame m:start l:45-&gt;&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(options));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">onShowHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> === <span class="number">0</span>) <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">        <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥å‰å° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">onHideHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">        <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥åå° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="title function_">onDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// qg.offShow(this.onShowHandler);</span></span><br><span class="line">        <span class="comment">// qg.offHide(this.onHideHandler);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">transToPay</span>(<span class="params">touch:cc.Event.EventTouch,data:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        cc.<span class="property">director</span>.<span class="title function_">loadScene</span>(<span class="string">&quot;PayGame&quot;</span>,<span class="function">(<span class="params">err,scene</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="comment">// cc.director.runScene(scene);</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">hwGameLoginHandler</span>(<span class="params">touch:cc.Event.EventTouch,data:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ -&gt;&quot;</span>, <span class="string">&quot;hwGameLoginHandler&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">hwLoginWithRealHandler</span>(<span class="params">touch:cc.Event.EventTouch,data:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;smile:ğŸš€ -&gt;&quot;</span>, <span class="string">&quot;hwLoginWithRealHandler&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/post/8fa65a01/image-20230805220948719.png" alt="image-20230805220948719"></p>
<p>æ³¨æ„ï¼šè¿™é‡Œæˆ‘æ›¾å°è¯• è®¾ç½® logo è®¾ç½®å…¬é’¥ã€ç§é’¥çš„è·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„ï¼Œå‘ç°æ˜¯æ— æ³•æ­£å¸¸æ„å»º</p>
<h2 id="è°ƒè¯•"><a href="#è°ƒè¯•" class="headerlink" title="è°ƒè¯•"></a>è°ƒè¯•</h2><ol>
<li><p>é¦–å…ˆè¦ä½¿ç”¨USBæ•°æ®çº¿è¿æ¥æˆ‘ä»¬çš„æ‰‹æœºï¼Œ æˆ‘è¿™é‡Œæ˜¯åä¸ºæ‰‹æœºï¼Œè®°å¾—å¼€å¯å¼€å‘è€…æ¨¡å¼ï¼ŒUSBè°ƒè¯•</p>
</li>
<li><p>ä½¿ç”¨ä¸Šé¢çš„æ‰“åŒ…æ–¹å¼ æ„å»ºå¥½æˆ‘ä»¬éœ€è¦çš„rpk æ–‡ä»¶ã€‚</p>
</li>
<li><p>æ„å»ºæˆåŠŸå æˆ‘ä»¬å»æŸ¥çœ‹ build ä¸‹çš„ huawei æ–‡ä»¶å¤¹ ä¸‹çš„ dist ä¸‹é¢çš„ rpk æ–‡ä»¶</p>
</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805224445753.png" alt="image-20230805224445753"></p>
<p><img src="/post/8fa65a01/image-20230805224550048.png" alt="image-20230805224550048"></p>
<ol start="4">
<li><p>æˆ‘ä»¬å¯åŠ¨ å·²ç»å®‰è£…å¥½çš„ å¼€å‘å·¥å…·</p>
<p><img src="/post/8fa65a01/image-20230805224624573.png" alt="image-20230805224624573"></p>
</li>
<li><p>é€‰æ‹©æ‰“å¼€ <code>rpk</code></p>
</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805224715526.png" alt="image-20230805224715526"></p>
<ol start="6">
<li>é€‰æ‹© åˆšåˆšæ„å»ºå¥½çš„ <code>rpk</code> æ–‡ä»¶  <code>build/dist/xxxx.rpk</code></li>
</ol>
<p><img src="/post/8fa65a01/image-20230805224812909.png" alt="image-20230805224812909"></p>
<ol start="7">
<li>ç‚¹å‡»ç¡®å®š æ‰“å¼€ æ–‡ä»¶</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805225018398.png" alt="image-20230805225018398"></p>
<ol start="8">
<li>é€‰æ‹© æœ¬åœ°è¿è¡Œ</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805225305545.png" alt="image-20230805225305545"></p>
<ol start="9">
<li>ç»§ç»­ç‚¹å‡» ç¡®å®š</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805225412020.png" alt="image-20230805225412020"></p>
<ol start="10">
<li>ç»§ç»­ç‚¹å‡» ç¡®è®¤</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805225503190.png" alt="image-20230805225503190"></p>
<ol start="11">
<li>æˆ‘ä»¬çœ‹åˆ° æ‰‹æœºæ­£å¸¸å¯åŠ¨</li>
</ol>
<p><img src="/post/8fa65a01/image-20230805225903976.png" alt="image-20230805225903976"></p>
<p>è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š</p>
<p><img src="/post/8fa65a01/image-20230805225928300.png" alt="image-20230805225928300"></p>
<p>ä»¥ä¸Š å°±æ˜¯æ•´ä¸ªæ¸¸æˆçš„æ„å»ºè¿‡ç¨‹ã€‚</p>
<h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><h3 id="å…³äºæ¸¸æˆæŠ¥é”™"><a href="#å…³äºæ¸¸æˆæŠ¥é”™" class="headerlink" title="å…³äºæ¸¸æˆæŠ¥é”™"></a>å…³äºæ¸¸æˆæŠ¥é”™</h3><p>åä¸ºè¿™ä¸ªè°ƒè¯•å·¥å…·ç¡®å®è·Ÿå¾®ä¿¡å°æ¸¸æˆé‚£ç§ä¸ä¸€æ ·ï¼Œçœ‹èµ·æ¥å¾ˆä¸æ–¹ä¾¿ï¼Œç‰¹åˆ«æ˜¯æŠ¥é”™ä¿¡æ¯å¤§å®¶çœ‹ä¸Šé¢ä»£ç  é‚£ä¸ªå…¨å±€æŠ¥é”™ç›‘å¬å¾ˆé‡è¦ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">qg.<span class="title function_">onError</span>(</span><br><span class="line">      <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;onError message = &quot;</span> + res.<span class="property">message</span> + <span class="string">&quot;, stack = &quot;</span> + res.<span class="property">stack</span>);&#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ äº†è¿™äº›ä»£ç ï¼Œæ‰èƒ½æ­£å¸¸è¾“å‡ºé”™è¯¯ï¼Œå¦åˆ™å¾ˆå¤šé”™è¯¯ï¼Œéƒ½ä¼šé™é»˜ï¼Œæ¸¸æˆä¸æŠ¥é”™ï¼Œä¹Ÿä¸æ­£å¸¸è¿è¡Œã€‚</p>
<h3 id="å…³äºonHide-onShow-æ–¹æ³•çš„this"><a href="#å…³äºonHide-onShow-æ–¹æ³•çš„this" class="headerlink" title="å…³äºonHide onShow æ–¹æ³•çš„this"></a>å…³äºonHide onShow æ–¹æ³•çš„this</h3><p>æˆ‘ä»¬å‘ç°ä¸Šé¢çš„è¾“å‡ºé‡Œ this å¯¹è±¡ä¸º <code>undefined</code> ä½†åä¸ºçš„ <code>onHide</code> å’Œ <code>onShow</code> åé¢åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸åƒ<code>Cocos Creator</code>ä¸€æ · å¯ä»¥ä¼ å…¥ this å¯¹è±¡ï¼Œå¦‚æœä½¿ç”¨<code>bind</code> åˆ™ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚</p>
<p>å¯¹æ­¤æˆ‘ä»¬æœ‰ä¸¤ç§å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<h4 id="æ–¹æ³•ä¸€-ç®­å¤´å‡½æ•°"><a href="#æ–¹æ³•ä¸€-ç®­å¤´å‡½æ•°" class="headerlink" title="æ–¹æ³•ä¸€ ç®­å¤´å‡½æ•°"></a>æ–¹æ³•ä¸€ ç®­å¤´å‡½æ•°</h4><p>åŸæ¥æ–¹æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title function_">onShowHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> === <span class="number">0</span>) <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">    <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥å‰å° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">onHideHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">    <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥åå° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ä¸ºï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> onShowHandler=<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> === <span class="number">0</span>) <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">    <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥å‰å° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> onHideHandler = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">    <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥åå° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æˆ‘ä»¬å†æ¬¡éªŒè¯ å‘ç°å·²ç»å¯ä»¥æ­£å¸¸ç§»é™¤ å’Œ <code>this</code> å·²ç»æœ‰å¯¹è±¡</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">08-05 23:29:16.746 W/jsLog   (23688): [WARN]: æ¸¸æˆè¿›å…¥åå° duration 1691249356746ms</span><br><span class="line">08-05 23:29:16.746 I/jsLog   (23688): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:29:16.746 I/jsLog   (23688): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:29:23.263 W/jsLog   (23688): [WARN]: æ¸¸æˆè¿›å…¥å‰å° duration 6517ms</span><br><span class="line">08-05 23:29:23.263 I/jsLog   (23688): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:29:23.263 I/jsLog   (23688): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:29:30.753 I/jsLog   (23688): å–æ¶ˆç›‘å¬</span><br></pre></td></tr></table></figure>

<h4 id="æ–¹æ³•æå‰èµ‹å€¼"><a href="#æ–¹æ³•æå‰èµ‹å€¼" class="headerlink" title="æ–¹æ³•æå‰èµ‹å€¼"></a>æ–¹æ³•æå‰èµ‹å€¼</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;ccclass, property&#125; = cc.<span class="property">_decorator</span>;</span><br><span class="line"><span class="meta">@ccclass</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">AppGame</span> <span class="keyword">extends</span> <span class="title class_ inherited__">cc.Component</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_boundOnShowHandler</span>: <span class="title class_">Function</span> = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="attr">_boundOnHideHandler</span>: <span class="title class_">Function</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœä½ æœ‰æ„é€ å‡½æ•°ï¼Œå¯ä»¥æ”¾åœ¨é‚£é‡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨onLoadæ–¹æ³•</span></span><br><span class="line">    <span class="title function_">onLoad</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_boundOnShowHandler</span> = <span class="variable language_">this</span>.<span class="property">onShowHandler</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_boundOnHideHandler</span> = <span class="variable language_">this</span>.<span class="property">onHideHandler</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    start () &#123;</span><br><span class="line">        qg.<span class="title function_">onHide</span>(<span class="variable language_">this</span>.<span class="property">_boundOnHideHandler</span>);</span><br><span class="line">        qg.<span class="title function_">onShow</span>(<span class="variable language_">this</span>.<span class="property">_boundOnShowHandler</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">transToPay</span>(<span class="params">touch:cc.Event.EventTouch,data:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">        qg.<span class="title function_">offShow</span>(<span class="variable language_">this</span>.<span class="property">_boundOnShowHandler</span>);</span><br><span class="line">        qg.<span class="title function_">offHide</span>(<span class="variable language_">this</span>.<span class="property">_boundOnHideHandler</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å–æ¶ˆç›‘å¬&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">onShowHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> === <span class="number">0</span>) <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">        <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥å‰å° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">onHideHandler</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> duration :<span class="built_in">number</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>() - <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span>;</span><br><span class="line">        <span class="title class_">GameData</span>.<span class="property">ins</span>.<span class="property">timeStamp</span> = cc.<span class="property">sys</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">`æ¸¸æˆè¿›å…¥åå° duration <span class="subst">$&#123;duration&#125;</span>ms`</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`å¯¹è±¡`</span>,<span class="variable language_">this</span> === <span class="variable language_">window</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å’Œä¸Šé¢ä¸€æ ·æ­£å¸¸è¿è¡Œç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">08-05 23:37:29.089 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥åå° duration 1691249849089ms</span><br><span class="line">08-05 23:37:29.089 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:29.089 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:30.880 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥å‰å° duration 1790ms</span><br><span class="line">08-05 23:37:30.880 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:30.880 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:33.002 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥åå° duration 2111ms</span><br><span class="line">08-05 23:37:33.003 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:33.003 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:34.343 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥å‰å° duration 1353ms</span><br><span class="line">08-05 23:37:34.343 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:34.343 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:36.130 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥åå° duration 1787ms</span><br><span class="line">08-05 23:37:36.130 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:36.134 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:37.110 W/jsLog   (27058): [WARN]: æ¸¸æˆè¿›å…¥å‰å° duration 980ms</span><br><span class="line">08-05 23:37:37.111 I/jsLog   (27058): å¯¹è±¡ [object Object]</span><br><span class="line">08-05 23:37:37.112 I/jsLog   (27058): å¯¹è±¡ <span class="literal">false</span></span><br><span class="line">08-05 23:37:42.447 I/jsLog   (27058): å–æ¶ˆç›‘å¬2</span><br></pre></td></tr></table></figure>

<h3 id="å®‰å…¨åŒºåŸŸ"><a href="#å®‰å…¨åŒºåŸŸ" class="headerlink" title="å®‰å…¨åŒºåŸŸ"></a>å®‰å…¨åŒºåŸŸ</h3><p>æˆ‘ä»¬å‘ç°åä¸ºå°æ¸¸æˆçš„ <code>getSystemInfoSync</code> æ–¹æ³• æ— æ³•è¿”å›æ­£ç¡®çš„å®‰å…¨åŒºåŸŸçš„å€¼ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> res = qg.<span class="title function_">getSystemInfoSync</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;on getSystemInfoSync: success =&quot;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(res,<span class="literal">null</span>,<span class="number">4</span>));</span><br></pre></td></tr></table></figure>

<p>æ‰“å°å¦‚ä¸‹ï¼š</p>
<p><img src="/post/8fa65a01/image-20230806005014567.png" alt="image-20230806005014567"></p>
<p>åŒä¸€å°æ‰‹æœºä¸åŒçš„æ¸¸æˆ</p>
<p><img src="/post/8fa65a01/image-20230805234207750.png" alt="image-20230805234207750"></p>
<p>è¿™ä¸ªæ˜¯åä¸ºæ‰‹æœº å®‰å…¨åŒºåŸŸè¿”å›å¼‚å¸¸ï¼Œä½†å¯ä»¥æ­£å¸¸è¿”å› <code>statusBarHeight</code> çš„å€¼ ä¸º<code>99</code> </p>
<p>ä¸‹é¢æˆ‘å†æ¬¡ä½¿ç”¨å¦å¤–ä¸€éƒ¨å°ç±³æ‰‹æœºæµ‹è¯•ï¼š</p>
<p>å…¶ä¸­ä¸€æ¬¡</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;brand&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Xiaomi&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;model&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2206122SC&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;pixelRatio&quot;</span><span class="punctuation">:</span> <span class="number">2.625</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;screenWidth&quot;</span><span class="punctuation">:</span> <span class="number">411.42857142857147</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;screenHeight&quot;</span><span class="punctuation">:</span> <span class="number">914.2857142857143</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;windowWidth&quot;</span><span class="punctuation">:</span> <span class="number">411.42857142857147</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;windowHeight&quot;</span><span class="punctuation">:</span> <span class="number">883.4285714285715</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;language&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zh&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;region&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CN&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;script&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;coreVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.1.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;COREVersion&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.1.21&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;system&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Android 13&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;platform&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ANDROIDOS&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;13.2.1.301_dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;statusBarHeight&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;platformVersionName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1.106&quot;</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;platformVersionCode&quot;</span><span class="punctuation">:</span> <span class="number">1106</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;safeArea&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;bottom&quot;</span><span class="punctuation">:</span> <span class="number">914.2857142857143</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;left&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;right&quot;</span><span class="punctuation">:</span> <span class="number">411.42857142857147</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;top&quot;</span><span class="punctuation">:</span> <span class="number">30.857142857142859</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="number">883.4285714285715</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">411.42857142857147</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="/post/8fa65a01/image-20230805234821375.png" alt="image-20230805234821375"></p>
<p>æ­¤æ—¶å€¼åˆæ­£å¸¸äº†ï¼Œå¯¹äºè¿™ä¸ª ç›®å‰è¿˜æ˜¯å¾ˆå¥‡æ€ªçš„ï¼Œåªèƒ½åœ¨ <code>top</code> ä¸º<code>0</code> çš„æ—¶å€™ é»˜è®¤ç»™ä¸ªå€¼è§£å†³é—®é¢˜ï¼Œè¿™é‡Œç»™çš„ <code>50</code></p>

  </div>
  <!--æ–‡æœ«ç»“æŸè¯­-->
  
    <div style="text-align:center;color: #ccc;font-size:24px;"> --- æœ¬æ–‡ç»“æŸ <i class="iconfont icon-heartbeat" style="font-size:24px;"></i> The End --- </div>
  
  <!--é¡µè„šå¹¿å‘Š-->
  
  <div class="mdui-divider"></div>
  
  <nav>
    
      <a rel="prev" class="post-nav-item mdui-float-left" href="/post/339e6f6c.html">
        <i class="iconfont icon-angle-left"></i>
        <span>CocosCreatorå¾®ä¿¡å°æ¸¸æˆçœŸæœºttfå­—ä½“ä¸èƒ½æ­£å¸¸æ˜¾ç¤º</span>
      </a>
    
    
      <a rel="next" class="post-nav-item mdui-float-right" href="/post/f50efc19.html">
        <span>CocosCreatoræ„å»ºå‡ºweb-mobileé¡¹ç›®çš„æ—¶å€™è‡ªåŠ¨åˆ·æ–°å®šå‘index.html</span>
        <i class="iconfont icon-angle-right"></i>
      </a>
    
  </nav>
</article>




  <div class="toc-button"  style="z-index: 100;">
    <button class="mdui-fab mdui-ripple mdui-color-teal" mdui-menu="{target: '#toc'}"><i class="iconfont icon-list"></i></button>
    <ul class="mdui-menu" id="toc">
      <li class="mdui-menu-item">
        <a href="/post/8fa65a01.html" id="toc-header" class="mdui-ripple">æ–‡ç« ç›®å½•</a>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">å‰ç½®ç¯å¢ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E7%AD%BE%E5%90%8D"><span class="toc-number">1.1.</span> <span class="toc-text">å…³äºç­¾å</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4"><span class="toc-number">2.</span> <span class="toc-text">æ­¥éª¤</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E8%AF%95"><span class="toc-number">3.</span> <span class="toc-text">è°ƒè¯•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">4.</span> <span class="toc-text">æ³¨æ„äº‹é¡¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E%E6%B8%B8%E6%88%8F%E6%8A%A5%E9%94%99"><span class="toc-number">4.1.</span> <span class="toc-text">å…³äºæ¸¸æˆæŠ¥é”™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8EonHide-onShow-%E6%96%B9%E6%B3%95%E7%9A%84this"><span class="toc-number">4.2.</span> <span class="toc-text">å…³äºonHide onShow æ–¹æ³•çš„this</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">4.2.1.</span> <span class="toc-text">æ–¹æ³•ä¸€ ç®­å¤´å‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E6%8F%90%E5%89%8D%E8%B5%8B%E5%80%BC"><span class="toc-number">4.2.2.</span> <span class="toc-text">æ–¹æ³•æå‰èµ‹å€¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F"><span class="toc-number">4.3.</span> <span class="toc-text">å®‰å…¨åŒºåŸŸ</span></a></li></ol></li></ol>
      </li>
    </ul>
  </div>



  </main>
  <footer id="footer" class="mdui-text-center mdui-m-t-5 mdui-p-b-2 mdui-p-t-4 mdui-color-theme">
  <div class="mdui-container">
    <div class="mdui-row">
      
        <a href="https://beian.miit.gov.cn" rel="noopener" target="_blank"></a>
      
      <span>
        &copy; 2018 - 2025 
        
          <span style="color:#d9333f" class="iconfont icon-heart"></span>
        
        asroads
      </span>
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span>Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span>Theme: <a href="https://github.com/kb1000fx/Meadow" rel="noopener" target="_blank">Meadow</a></span>
        </div>
      
    </div>
    <div class="mdui-row">
      
        <div class="mdui-col-xs-6 mdui-text-right">
          <span id="busuanzi_container_site_uv" style="display: none;"> <span class="iconfont icon-user"></span>æ€»è®¿å®¢é‡ <span id="busuanzi_value_site_uv"></span></span>
        </div>
        <div class="mdui-col-xs-6 mdui-text-left">
          <span id="busuanzi_container_site_pv" style="display: none;"> <span class="iconfont icon-eye"></span>æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"></span></span>
        </div>
      
    </div>
 </div>
</footer>
  
  <button id="gotop" class="mdui-fab mdui-fab-fixed mdui-fab-hide mdui-ripple mdui-color-teal" style="z-index:100;"><i class="iconfont icon-arrowup"></i></button>
  
  

    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>




    
<script src="/js/mdui.min.v1.0.0.js"></script>




<script src="/js/meadow.js"></script>

</body>
</html >